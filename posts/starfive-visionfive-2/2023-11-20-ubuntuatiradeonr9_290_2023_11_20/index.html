<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="true"><head>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>StarFive VisionFive 2 - Ubuntu 23.10 external GPU ATI Radeon R9 290 &middot; Opvolger</title>
    <meta name="title" content="StarFive VisionFive 2 - Ubuntu 23.10 external GPU ATI Radeon R9 290 &middot; Opvolger">
  

  
  
  
    <meta name="keywords" content="starfive-visionfive-2,RISC-V,">
  
  
  
  <link rel="canonical" href="https://demo.k8s.babelvis.io/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/">
  

  
  
    <meta name="author" content="Bas Magré">
  
  
    
      
        
      
    
      
        
          <link href="https://bsky.app/profile/opvolger.bsky.social" rel="me">
        
      
    
      
        
          <link href="https://github.com/Opvolger" rel="me">
        
      
    
      
        
          <link href="https://gitlab.com/opvolger" rel="me">
        
      
    
      
        
          <link href="https://linkedin.com/in/bas-magre" rel="me">
        
      
    
      
        
          <link href="https://reddit.com/user/Opvolger" rel="me">
        
      
    
      
        
          <link href="https://steamcommunity.com/id/opvolger" rel="me">
        
      
    
      
        
          <link href="https://x.com/Opvolger" rel="me">
        
      
    
      
        
          <link href="https://youtube.com/@justanotherdevopsguy/videos" rel="me">
        
      
    
      
        
          <link href="https://codeberg.org/Opvolger" rel="me">
        
      
    
  

  
  <meta property="og:url" content="https://demo.k8s.babelvis.io/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/">
  <meta property="og:site_name" content="Opvolger">
  <meta property="og:title" content="StarFive VisionFive 2 - Ubuntu 23.10 external GPU ATI Radeon R9 290">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-11-20T00:00:00+00:00">
    <meta property="article:tag" content="Starfive-Visionfive-2">
    <meta property="article:tag" content="RISC-V">
    <meta property="og:image" content="https://demo.k8s.babelvis.io/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/cover.png">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://demo.k8s.babelvis.io/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/cover.png">
  <meta name="twitter:title" content="StarFive VisionFive 2 - Ubuntu 23.10 external GPU ATI Radeon R9 290">

  
  
  
  
    
      
    
  
    
      
    
  
    
  
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.b5368c8f64c443a2db3640baffb642b259c300b1b22c920ca173c246129a987e618d2ce489d86098e3470c351836906c95f0e0b44fd3514bb75ca118f8652640.css"
    integrity="sha512-tTaMj2TEQ6LbNkC6/7ZCslnDALGyLJIMoXPCRhKamH5hjSzkidhgmONHDDUYNpBslfDgtE/TUUu3XKEY&#43;GUmQA==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js"
    integrity="sha512-b0EXSzoFtoCCD&#43;CMrb&#43;l&#43;3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script>
  
  
  
  
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
  
    
  
  
    
  
  
    
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.b16d807a513bd375edb24c501502c85cc94dfdaf3cf1979d51e2362e4eb5deaeab801c26116a5ee436a7ac00f27d244f7778458fee832a0cbb274ee23900d6bf.js"
      integrity="sha512-sW2AelE703XtskxQFQLIXMlN/a888ZedUeI2Lk613q6rgBwmEWpe5DanrADyfSRPd3hFj&#43;6DKgy7J07iOQDWvw=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>


























  

  

  

  

  








  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "StarFive VisionFive 2 - Ubuntu 23.10 external GPU ATI Radeon R9 290",
    "headline": "StarFive VisionFive 2 - Ubuntu 23.10 external GPU ATI Radeon R9 290",
    
    "inLanguage": "en",
    "url" : "https://demo.k8s.babelvis.io/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/",
    "author" : {
      "@type": "Person",
      "name": "Bas Magré"
    },
    "copyrightYear": "2023",
    "dateCreated": "2023-11-20T00:00:00\u002b00:00",
    "datePublished": "2023-11-20T00:00:00\u002b00:00",
    
    "dateModified": "2023-11-20T00:00:00\u002b00:00",
    
    "keywords": ["starfive-visionfive-2","RISC-V"],
    
    "mainEntityOfPage": "true",
    "wordCount": "3383"
  },
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
            "@type": "ListItem",
            "position":  1 ,
            "name": "Posts",
            "item": "https://demo.k8s.babelvis.io/posts/"
          },{
        "@type": "ListItem",
        "position":  2 ,
        "name": "StarFive VisionFive 2 - Ubuntu 23.10 external GPU ATI Radeon R9 290",
        "item": "https://demo.k8s.babelvis.io/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/"
      }
    ]
  }]
  </script>



  
  
    




  

  
  

  
  

  
  

  
  
</head>


















  
  <body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      <div class="main-menu flex items-center w-full gap-2 p-1 pl-0">
  
  
    <a href="/" class="text-base font-medium truncate min-w-0 shrink">
      Opvolger
    </a>
  
  <div class="flex items-center ms-auto">
    <div class="hidden md:flex">
      <nav class="flex items-center gap-x-5 h-12">
  
    
      
  
    <a
      href="/about/"
      
      class="flex items-center bf-icon-color-hover"
      aria-label="About"
      title="About">
      
      
        <span class="text-base font-medium break-normal">
          About
        </span>
      
    </a>
  

    
      
  
    <a
      href="/posts/"
      
      class="flex items-center bf-icon-color-hover"
      aria-label="Blog"
      title="Posts">
      
      
        <span class="text-base font-medium break-normal">
          Blog
        </span>
      
    </a>
  

    
      
  
    <div class="nested-menu">
      <div class="cursor-pointer flex items-center">
        <a
          
            href="/kodi/kodi/"
            
          
          aria-label="KODI Addons"
          class="flex items-center text-base font-medium bf-icon-color-hover"
          title="KODI Addons">
          
          <span class="text-bg font-bg break-normal" title="KODI Addons">
            KODI Addons
          </span>
          <span>
            <span class="relative block icon"><svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>
</span>
          </span>
        </a>
      </div>
      <div class="menuhide">
        <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl bg-neutral/25 dark:bg-neutral-800/25">
          <div class="flex flex-col space-y-3">
            
              <a
                href="/kodi/npo/"
                
                aria-label="NPO"
                class="flex items-center bf-icon-color-hover">
                
                <span class="text-sm font-sm" title="KODI Addons - NPO Uitzending gemist">
                  NPO
                </span>
              </a>
            
              <a
                href="/kodi/rtlxl/"
                
                aria-label="RTLxl"
                class="flex items-center bf-icon-color-hover">
                
                <span class="text-sm font-sm" title="KODI Addons - RTLxl">
                  RTLxl
                </span>
              </a>
            
              <a
                href="/kodi/kanalenlijst-hans/"
                
                aria-label="Kanalenlijst Hans"
                class="flex items-center bf-icon-color-hover">
                
                <span class="text-sm font-sm" title="KODI Addons - Kanalenlijst Hans">
                  Kanalenlijst Hans
                </span>
              </a>
            
          </div>
        </div>
      </div>
    </div>
  

    
      
  
    <div class="nested-menu">
      <div class="cursor-pointer flex items-center">
        <a
          
            href="/tags/risc-v/"
            
          
          aria-label="RISC-V"
          class="flex items-center text-base font-medium bf-icon-color-hover"
          title="RISC-V">
          
          <span class="text-bg font-bg break-normal" title="RISC-V">
            RISC-V
          </span>
          <span>
            <span class="relative block icon"><svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>
</span>
          </span>
        </a>
      </div>
      <div class="menuhide">
        <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl bg-neutral/25 dark:bg-neutral-800/25">
          <div class="flex flex-col space-y-3">
            
              <a
                href="/tags/starfive-visionfive-2/"
                
                aria-label="StarFive VisionFive 2"
                class="flex items-center bf-icon-color-hover">
                
                <span class="text-sm font-sm" title="Starfive-Visionfive-2">
                  StarFive VisionFive 2
                </span>
              </a>
            
              <a
                href="/tags/milk-v-jupiter/"
                
                aria-label="Milk-V Jupiter"
                class="flex items-center bf-icon-color-hover">
                
                <span class="text-sm font-sm" title="Milk-v-Jupiter">
                  Milk-V Jupiter
                </span>
              </a>
            
          </div>
        </div>
      </div>
    </div>
  

    
      
  
    <a
      href="/tags/arm/"
      
      class="flex items-center bf-icon-color-hover"
      aria-label="ARM"
      title="ARM">
      
      
        <span class="text-base font-medium break-normal">
          ARM
        </span>
      
    </a>
  

    
  

  

  

  
    <button
      id="search-button"
      aria-label="Search"
      class="text-base bf-icon-color-hover"
      title="Search (/)">
      <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
    </button>
  

  
    <div class="flex items-center">
      <button
        id="appearance-switcher"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base bf-icon-color-hover">
        <div class="flex items-center justify-center dark:hidden">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
        </div>
        <div class="items-center justify-center hidden dark:flex">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
        </div>
      </button>
    </div>
  
</nav>



    </div>
    <div class="flex md:hidden">
      <div class="flex items-center h-14 gap-4">
  
    <button
      id="search-button-mobile"
      aria-label="Search"
      class="flex items-center justify-center bf-icon-color-hover"
      title="Search (/)">
      <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
    </button>
  

  
    <button
      id="appearance-switcher-mobile"
      type="button"
      aria-label="Dark mode switcher"
      class="flex items-center justify-center text-neutral-900 hover:text-primary-600 dark:text-neutral-200 dark:hover:text-primary-400">
      <div class="dark:hidden">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
      </div>
      <div class="hidden dark:block">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
      </div>
    </button>
  

  
    <input type="checkbox" id="mobile-menu-toggle" autocomplete="off" class="hidden peer">
    <label for="mobile-menu-toggle" class="flex items-center justify-center cursor-pointer bf-icon-color-hover">
      <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
    </label>

    <div
      role="dialog"
      aria-modal="true"
      style="scrollbar-gutter: stable;"
      class="fixed inset-0 z-50 invisible overflow-y-auto px-6 py-20 opacity-0 transition-[opacity,visibility] duration-300 peer-checked:visible peer-checked:opacity-100 bg-neutral-50/97 dark:bg-neutral-900/99
      bf-scrollbar">
      <label
        for="mobile-menu-toggle"
        class="fixed end-8 top-5 flex items-center justify-center z-50 h-12 w-12 cursor-pointer select-none rounded-full bf-icon-color-hover border bf-border-color bf-border-color-hover bg-neutral-50 dark:bg-neutral-900">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </label>
      <nav class="mx-auto max-w-md space-y-6">
        
  
    
    <div class="px-2">
      <a
        href="/about/"
        aria-label="About"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="About" class="text-2xl font-bold tracking-tight">
          About
        </span>
        
      </a>

      
    </div>
  
    
    <div class="px-2">
      <a
        href="/posts/"
        aria-label="Blog"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="Posts" class="text-2xl font-bold tracking-tight">
          Blog
        </span>
        
      </a>

      
    </div>
  
    
    <div class="px-2">
      <a
        href="/kodi/kodi/"
        aria-label="KODI Addons"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="KODI Addons" class="text-2xl font-bold tracking-tight">
          KODI Addons
        </span>
        
          <label
            for="fullscreen-submenu-kodi-addons"
            class="ms-auto flex items-center justify-center h-10 w-10 cursor-pointer rounded-lg bf-icon-color-hover border bf-border-color bf-border-color-hover">
            <span class="relative block icon"><svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>
</span>
          </label>
        
      </a>

      
        <input checked type="checkbox" id="fullscreen-submenu-kodi-addons" autocomplete="off" class="hidden peer/full">

        <div
          class="grid grid-rows-[0fr] transition-[grid-template-rows] duration-300 peer-checked/full:grid-rows-[1fr]">
          <div class="overflow-hidden">
            <div class="ms-7 mt-4">
              
                <a
                  href="/kodi/npo/"
                  aria-label="NPO"
                  
                  class="flex items-center gap-3 p-2 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
                  
                  <span title="KODI Addons - NPO Uitzending gemist" class="text-lg">
                    NPO
                  </span>
                </a>
              
                <a
                  href="/kodi/rtlxl/"
                  aria-label="RTLxl"
                  
                  class="flex items-center gap-3 p-2 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
                  
                  <span title="KODI Addons - RTLxl" class="text-lg">
                    RTLxl
                  </span>
                </a>
              
                <a
                  href="/kodi/kanalenlijst-hans/"
                  aria-label="Kanalenlijst Hans"
                  
                  class="flex items-center gap-3 p-2 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
                  
                  <span title="KODI Addons - Kanalenlijst Hans" class="text-lg">
                    Kanalenlijst Hans
                  </span>
                </a>
              
            </div>
          </div>
        </div>
      
    </div>
  
    
    <div class="px-2">
      <a
        href="/tags/risc-v/"
        aria-label="RISC-V"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="RISC-V" class="text-2xl font-bold tracking-tight">
          RISC-V
        </span>
        
          <label
            for="fullscreen-submenu-risc-v"
            class="ms-auto flex items-center justify-center h-10 w-10 cursor-pointer rounded-lg bf-icon-color-hover border bf-border-color bf-border-color-hover">
            <span class="relative block icon"><svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>
</span>
          </label>
        
      </a>

      
        <input checked type="checkbox" id="fullscreen-submenu-risc-v" autocomplete="off" class="hidden peer/full">

        <div
          class="grid grid-rows-[0fr] transition-[grid-template-rows] duration-300 peer-checked/full:grid-rows-[1fr]">
          <div class="overflow-hidden">
            <div class="ms-7 mt-4">
              
                <a
                  href="/tags/starfive-visionfive-2/"
                  aria-label="StarFive VisionFive 2"
                  
                  class="flex items-center gap-3 p-2 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
                  
                  <span title="Starfive-Visionfive-2" class="text-lg">
                    StarFive VisionFive 2
                  </span>
                </a>
              
                <a
                  href="/tags/milk-v-jupiter/"
                  aria-label="Milk-V Jupiter"
                  
                  class="flex items-center gap-3 p-2 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
                  
                  <span title="Milk-v-Jupiter" class="text-lg">
                    Milk-V Jupiter
                  </span>
                </a>
              
            </div>
          </div>
        </div>
      
    </div>
  
    
    <div class="px-2">
      <a
        href="/tags/arm/"
        aria-label="ARM"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="ARM" class="text-2xl font-bold tracking-tight">
          ARM
        </span>
        
      </a>

      
    </div>
  

        
  

        
  

      </nav>
    </div>
  
</div>







    </div>
  </div>
</div>





    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        StarFive VisionFive 2 - Ubuntu 23.10 external GPU ATI Radeon R9 290
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  
    
  

  

  
    
  

  

  
    
  

  
    
  

  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2023-11-20T00:00:00&#43;00:00">20 November 2023</time><span class="px-2 text-primary-500">&middot;</span><span>3383 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">16 mins</span>
    

    
    
  </div>

  

  
  

  
  



      </div>
      
        
  
  
  
  
  
  

  

  
    
    
<div class="flex author">
  
    
    
      
    
    
      
      
      
        
        
        
      
      <img
        class="!mt-0 !mb-0 h-24 w-24 rounded-full me-4"
        width="96"
        height="96"
        alt="Bas Magré"
        src="/456643_7507628670753015924_hu_ea64f51d81827313.png"
        data-zoom-src="/456643_7507628670753015924_hu_701c5e6269fa295f.png">
    
  
  <div class="place-self-center">
    
      <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
        Author
      </div>
      <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
        Bas Magré
      </div>
    
    
      <div class="text-sm text-neutral-700 dark:text-neutral-400">Father, happily married, DevOps engineer, C# developer, Python hobbyist, ex Oracle developer. Open-source freak, Opel Kadett C and &lsquo;Hack the planet&rsquo; as a hobby.</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:bas@opvolger.net"
          target="_blank"
          aria-label="Email"
          title="Email"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://bsky.app/profile/opvolger.bsky.social"
          target="_blank"
          aria-label="Bluesky"
          title="Bluesky"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256,232.562c-21.183,-41.196 -78.868,-117.97 -132.503,-155.834c-51.378,-36.272 -70.978,-29.987 -83.828,-24.181c-14.872,6.72 -17.577,29.554 -17.577,42.988c0,13.433 7.365,110.138 12.169,126.281c15.873,53.336 72.376,71.358 124.413,65.574c2.66,-0.395 5.357,-0.759 8.089,-1.097c-2.68,0.429 -5.379,0.796 -8.089,1.097c-76.259,11.294 -143.984,39.085 -55.158,137.972c97.708,101.165 133.908,-21.692 152.484,-83.983c18.576,62.291 39.972,180.718 150.734,83.983c83.174,-83.983 22.851,-126.674 -53.408,-137.969c-2.71,-0.302 -5.409,-0.667 -8.089,-1.096c2.732,0.337 5.429,0.702 8.089,1.096c52.037,5.785 108.54,-12.239 124.413,-65.574c4.804,-16.142 12.169,-112.847 12.169,-126.281c-0,-13.434 -2.705,-36.267 -17.577,-42.988c-12.85,-5.806 -32.45,-12.09 -83.829,24.181c-53.634,37.864 -111.319,114.635 -132.502,155.831Z"/></svg></span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/Opvolger"
          target="_blank"
          aria-label="Github"
          title="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://gitlab.com/opvolger"
          target="_blank"
          aria-label="Gitlab"
          title="Gitlab"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M510.486,284.482l-27.262-83.963c.012.038.016.077.028.115-.013-.044-.021-.088-.033-.132v-.01L429.1,33.871a21.328,21.328,0,0,0-20.445-14.6A21.038,21.038,0,0,0,388.466,34L337.094,192.154H175L123.533,33.989A21.033,21.033,0,0,0,103.35,19.274h-.113A21.467,21.467,0,0,0,82.86,34L28.888,200.475l-.008.021v0c-.013.042-.019.084-.033.127.012-.038.017-.077.029-.115L1.514,284.482a30.6,30.6,0,0,0,11.117,34.283L248.893,490.427c.035.026.074.041.109.067.1.072.2.146.3.214-.1-.065-.187-.136-.282-.2l0,0c.015.012.033.02.05.031s.027.015.041.024l.006,0a11.992,11.992,0,0,0,1.137.7c.054.03.1.068.157.1l0,0c.033.016.064.038.1.054s.053.02.077.032.038.015.056.023c.044.021.092.034.136.057.205.1.421.178.633.264.2.082.389.177.592.248l.025.011c.034.012.064.028.1.04s.083.032.125.046l.05.012c.053.016.11.024.163.039.019.006.042.009.063.015.284.086.579.148.872.213.115.026.225.062.341.083.017,0,.032.009.05.012.038.008.073.021.112.027.062.011.122.031.186.04.049.007.1,0,.151.012h.033a11.918,11.918,0,0,0,1.7.136h.019a11.971,11.971,0,0,0,1.7-.136h.033c.05-.008.1,0,.153-.012s.124-.029.187-.04c.038-.006.073-.019.11-.027.017,0,.032-.009.049-.012.118-.023.231-.059.349-.084.288-.064.578-.126.861-.21.019-.006.039-.008.059-.014.055-.017.113-.024.169-.041.016-.006.035-.007.051-.012.044-.013.086-.032.129-.047s.063-.028.1-.041l.026-.01c.214-.076.417-.175.627-.261s.394-.154.584-.245c.047-.023.1-.036.142-.059.018-.009.04-.015.058-.024s.053-.02.078-.033.068-.04.1-.056l0,0c.056-.028.106-.069.161-.1a12.341,12.341,0,0,0,1.132-.695c.029-.02.062-.035.092-.056.008-.006.017-.009.024-.015.035-.026.076-.043.11-.068l236.3-171.666A30.6,30.6,0,0,0,510.486,284.482ZM408.8,49.48l46.342,142.674H362.46Zm-305.6,0,46.428,142.675H56.948ZM26.817,299.251a6.526,6.526,0,0,1-2.361-7.308l20.34-62.42L193.835,420.6Zm38.245-82.972h92.411L223.354,419.22Zm183.416,273.83c-.047-.038-.092-.079-.138-.118-.009-.008-.018-.018-.028-.026-.091-.075-.18-.152-.268-.231-.172-.15-.341-.3-.5-.462.014.012.029.022.043.035l.055.046a12.191,12.191,0,0,0,1.091.929l.012.011c.018.013.033.03.051.045C248.689,490.263,248.58,490.19,248.478,490.109Zm7.514-48.482L217.226,322.21,182.839,216.279H329.253Zm7.935,48.107c-.091.079-.178.157-.27.233l-.032.028c-.047.038-.091.079-.136.117-.1.08-.209.152-.313.229.018-.013.033-.032.053-.044l.009-.009a11.69,11.69,0,0,0,1.086-.926c.014-.013.03-.024.044-.036s.038-.03.054-.047C264.262,489.435,264.1,489.586,263.927,489.734Zm90.7-273.455h92.4l-18.91,24.23-139.468,178.7Zm130.567,82.967L318.2,420.563,467.284,229.538l20.258,62.393A6.528,6.528,0,0,1,485.189,299.246Z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://linkedin.com/in/bas-magre"
          target="_blank"
          aria-label="Linkedin"
          title="Linkedin"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://reddit.com/user/Opvolger"
          target="_blank"
          aria-label="Reddit"
          title="Reddit"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://steamcommunity.com/id/opvolger"
          target="_blank"
          aria-label="Steam"
          title="Steam"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://x.com/Opvolger"
          target="_blank"
          aria-label="Twitter"
          title="Twitter"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://youtube.com/@justanotherdevopsguy/videos"
          target="_blank"
          aria-label="Youtube"
          title="Youtube"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://codeberg.org/Opvolger"
          target="_blank"
          aria-label="Codeberg"
          title="Codeberg"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><?xml version="1.0" encoding="utf-8"?>
<svg fill="currentColor" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><path d="M11.955.49A12 12 0 0 0 0 12.49a12 12 0 0 0 1.832 6.373L11.838 5.928a.187.14 0 0 1 .324 0l10.006 12.935A12 12 0 0 0 24 12.49a12 12 0 0 0-12-12 12 12 0 0 0-.045 0zm.375 6.467 4.416 16.553a12 12 0 0 0 5.137-4.213z"/></svg>
</span></span></a
        >
      
    
  </div>

</div>
  </div>
</div>

  

  

  
    <div class="mb-5"></div>
  

      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      
        <div class="order-first lg:ms-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs">
          <div class="toc ps-5 print:hidden lg:sticky lg:top-10">
            <details
  open
  id="TOCView"
  class="toc-right mt-0 overflow-y-auto overscroll-contain bf-scrollbar rounded-lg -ms-5 ps-5 pe-2 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#intro">Intro</a></li>
    <li><a href="#hardware">Hardware</a></li>
    <li><a href="#downloades">Downloades</a></li>
    <li><a href="#update-firmware-from-the-visionfive-2-to-ubuntu-firmware">Update firmware from the VisionFive 2 to Ubuntu firmware</a></li>
    <li><a href="#create-the-sd-card">Create the SD-card</a></li>
    <li><a href="#fedora-install-packages">Fedora install packages</a></li>
    <li><a href="#building-the-linux-kernel">Building the Linux Kernel</a></li>
    <li><a href="#bootroot-copy-kernel">BOOT/ROOT Copy kernel</a></li>
    <li><a href="#setup-ubuntu-with-ubuntu-kernel-and-firmware">Setup Ubuntu with ubuntu kernel and firmware</a></li>
    <li><a href="#update-firmware-visionfive-2-to-382">Update firmware VisionFive 2 to 3.8.2</a></li>
    <li><a href="#boot-visionfive-2-with-external-gpu">Boot Visionfive 2 with external GPU</a></li>
    <li><a href="#network">Network</a></li>
    <li><a href="#screenshot">Screenshot!</a></li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#intro">Intro</a></li>
    <li><a href="#hardware">Hardware</a></li>
    <li><a href="#downloades">Downloades</a></li>
    <li><a href="#update-firmware-from-the-visionfive-2-to-ubuntu-firmware">Update firmware from the VisionFive 2 to Ubuntu firmware</a></li>
    <li><a href="#create-the-sd-card">Create the SD-card</a></li>
    <li><a href="#fedora-install-packages">Fedora install packages</a></li>
    <li><a href="#building-the-linux-kernel">Building the Linux Kernel</a></li>
    <li><a href="#bootroot-copy-kernel">BOOT/ROOT Copy kernel</a></li>
    <li><a href="#setup-ubuntu-with-ubuntu-kernel-and-firmware">Setup Ubuntu with ubuntu kernel and firmware</a></li>
    <li><a href="#update-firmware-visionfive-2-to-382">Update firmware VisionFive 2 to 3.8.2</a></li>
    <li><a href="#boot-visionfive-2-with-external-gpu">Boot Visionfive 2 with external GPU</a></li>
    <li><a href="#network">Network</a></li>
    <li><a href="#screenshot">Screenshot!</a></li>
  </ul>
</nav>
  </div>
</details>



          </div>
        </div>
      


      <div class="min-w-0 min-h-0 max-w-fit">
        

        <div class="article-content max-w-prose mb-20">
          
<h2 class="relative group">Intro
    <div id="intro" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#intro" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>I read on the Ubuntu website that there is now external GPU support for Ubuntu 23.10. There is no lie in that, but with the current kernel (6.5.0-9 and 6.5.0-10) it completely crashes.</p>
<p><a href="https://bugs.launchpad.net/ubuntu/&#43;source/linux-riscv/&#43;bug/2039782"  target="_blank" rel="noreferrer">link</a></p>
<p>Keep in mind that:</p>
<ul>
<li>the kernel of Ubuntu only works with the firmware of Ubuntu.</li>
<li>the kernel of StarFive only works with the firmware of Starfive.</li>
</ul>
<p>So I put together my own kernel again and got it running again.</p>

<h2 class="relative group">Hardware
    <div id="hardware" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#hardware" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ul>
<li>StarFive VisionFive 2</li>
<li>BEYIMEI PCIE Riser-Ver010X GPU Riser, 1X tot 16X (4PIN/6PIN/MOLEX) PCIE-verlengkabel, M.2 naar PCI-E Riser Card Bitcoin Litecoin Ethereum.
This is about 11 EURO on amazon, so no big deal&hellip; <a href="https://www.amazon.nl/dp/B0BF4PH83Y?ref_=pe_28126711_487767311_302_E_DDE_dt_1"  target="_blank" rel="noreferrer">amazon-link</a></li>
<li>AMD/ATI Hawaii PRO [Radeon R9 290/390], Bought on a Dutch second-hand website, for 45 EURO. or ATI Radeon 5450, Bought on a Dutch second-hand website, for 10 EURO.</li>
<li>An ATX power supply (was still lying around in the house)</li>
<li>For debugging a USB to TTL (was still lying around in the house), is about 5 EURO.</li>
</ul>
<p><figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="img"
    width="2048"
    height="1152"
    src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_001_hu_60ba47f13dbb9c31.jpeg"
    srcset="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_001_hu_60ba47f13dbb9c31.jpeg 800w, /posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_001_hu_ff0ca59c94c75a11.jpeg 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_001.jpeg"></figure>

<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="img"
    width="2048"
    height="1152"
    src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_002_hu_9f290cb7ed526c7c.jpeg"
    srcset="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_002_hu_9f290cb7ed526c7c.jpeg 800w, /posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_002_hu_8cbc1eae61c01bc1.jpeg 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_002.jpeg"></figure>

or
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="img"
    width="2048"
    height="1152"
    src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_hu_568105b81d476cd4.png"
    srcset="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_hu_568105b81d476cd4.png 800w, /posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup_hu_8faf26f3e298d850.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/setup.png"></figure>
</p>

<h2 class="relative group">Downloades
    <div id="downloades" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#downloades" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>download (to <code>~/Downloads/SF2_2023_11_20</code>):</p>
<ul>
<li><a href="https://github.com/starfive-tech/VisionFive2/releases/download/VF2_v3.8.2/visionfive2_fw_payload.img"  target="_blank" rel="noreferrer">visionfive2_fw_payload.img</a></li>
<li><a href="https://github.com/starfive-tech/VisionFive2/releases/download/VF2_v3.8.2/u-boot-spl.bin.normal.out"  target="_blank" rel="noreferrer">u-boot-spl.bin.normal.out</a></li>
<li><a href="https://launchpad.net/~ubuntu-risc-v-team/&#43;archive/ubuntu/release/&#43;files/u-boot-starfive_2023.09.22-next-5d2fae79c7d6-0ubuntu1~ppa5_riscv64.deb"  target="_blank" rel="noreferrer">u-boot-starfive-ubuntu-deb</a></li>
</ul>
<p>Download the <code>starfive-jh7110-VF2_515_v3.8.2-66-SD-minimal-desktop-wayland.img.bz2</code> (202310/sd) from StarFive VisionFive 2 Support <a href="https://debian.starfivetech.com/"  target="_blank" rel="noreferrer">page</a> (I used One Drive).</p>
<p>Download <code>[ubuntu-22.04.2-preinstalled-server-riscv64+visionfive.img.xz](https://cdimage.ubuntu.com/releases/23.10/release/ubuntu-23.10-preinstalled-server-riscv64+visionfive2.img.xz)</code> from <a href="https://ubuntu.com/download/risc-v"  target="_blank" rel="noreferrer">ubuntu</a>
Unzip it to <code>ubuntu-23.10-preinstalled-server-riscv64+visionfive2.img</code>.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ mkdir -p ~/Downloads/SF2_2023_11_20
</span></span><span class="line"><span class="cl">$ mkdir -p ~/Downloads/SF2_2023_11_20/ubuntu
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> ~/Downloads/SF2_2023_11_20
</span></span><span class="line"><span class="cl">$ wget https://github.com/starfive-tech/VisionFive2/releases/download/VF2_v3.8.2/visionfive2_fw_payload.img
</span></span><span class="line"><span class="cl">$ wget https://github.com/starfive-tech/VisionFive2/releases/download/VF2_v3.8.2/u-boot-spl.bin.normal.out
</span></span><span class="line"><span class="cl">$ bzip2 -d ~/Downloads/SF2_2023_11_20/starfive-jh7110-VF2_515_v3.8.2-66-SD-minimal-desktop-wayland.img.bz2</span></span></code></pre></div></div>

<h2 class="relative group">Update firmware from the VisionFive 2 to Ubuntu firmware
    <div id="update-firmware-from-the-visionfive-2-to-ubuntu-firmware" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#update-firmware-from-the-visionfive-2-to-ubuntu-firmware" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>My first staps are flowing the Ubuntu <a href="https://wiki.ubuntu.com/RISC-V/StarFive%20VisionFive%202"  target="_blank" rel="noreferrer">wiki</a></p>
<p>We already downloaded <code>u-boot-starfive_2023.09.22-next-5d2fae79c7d6-0ubuntu1~ppa5_riscv64.deb</code> and now extract the firmware to <code>~/Downloads/SF2_2023_11_20/ubuntu</code></p>
<p>I used Ark for this
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="img"
    width="1257"
    height="719"
    src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/unpack_deb_firmware_hu_f8d2eb59de31394d.png"
    srcset="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/unpack_deb_firmware_hu_f8d2eb59de31394d.png 800w, /posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/unpack_deb_firmware.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/unpack_deb_firmware.png"></figure>
</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># my download tree is now</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> ~/Downloads/SF2_2023_11_20
</span></span><span class="line"><span class="cl">$ tree
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">├── sdcard.img
</span></span><span class="line"><span class="cl">├── starfive-jh7110-VF2_515_v3.8.2-66-SD-minimal-desktop-wayland.img
</span></span><span class="line"><span class="cl">├── u-boot-spl.bin.normal.out
</span></span><span class="line"><span class="cl">├── u-boot-starfive_2023.09.22-next-5d2fae79c7d6-0ubuntu1~ppa5_riscv64.deb
</span></span><span class="line"><span class="cl">├── ubuntu
</span></span><span class="line"><span class="cl">│   ├── u-boot.itb
</span></span><span class="line"><span class="cl">│   └── u-boot-spl.bin.normal.out
</span></span><span class="line"><span class="cl">└── visionfive2_fw_payload.img</span></span></code></pre></div></div>
<p>If you read the documentation of Ubuntu and uses the firmware of Ubuntu. This wil work for their kernels but if you compile the source code of StarFive the USB devices will not work (mouse/keyboard).</p>
<p>I didn&rsquo;t get it working with the sdcard.img (like last times) to flash my VisionFive 2, so I used tftp. I used the docker <a href="https://hub.docker.com/r/pghalliday/tftp"  target="_blank" rel="noreferrer">image</a></p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">cd</span> ~/Downloads/SF2_2023_11_20
</span></span><span class="line"><span class="cl"><span class="c1"># startup the docker tftp server and expose the current directory to /var/tftpboot</span>
</span></span><span class="line"><span class="cl"><span class="c1"># The first time you will see this message, but the second time you will see nothing</span>
</span></span><span class="line"><span class="cl">$ docker run -p 0.0.0.0:69:69/udp -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/var/tftpboot -i -t pghalliday/tftp
</span></span><span class="line"><span class="cl">Unable to find image <span class="s1">&#39;pghalliday/tftp:latest&#39;</span> locally
</span></span><span class="line"><span class="cl">latest: Pulling from pghalliday/tftp
</span></span><span class="line"><span class="cl">fae91920dcd4: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">0bb6771b2292: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">Digest: sha256:59f843a93d62ac6e2fa475ee3d1a3786464fe5ea0334e6f1ea79bdec837f09fa
</span></span><span class="line"><span class="cl">Status: Downloaded newer image <span class="k">for</span> pghalliday/tftp:latest</span></span></code></pre></div></div>
<p>Do NOT hit Ctrl+C! We need this server until we are done flashing!</p>
<p>Boot up your VisionFive 2 without a SD-card and the USB to TTL connected (see <a href="https://doc-en.rvspace.org/VisionFive2/PDF/VisionFive2_QSG.pdf"  target="_blank" rel="noreferrer">link</a> for more information)</p>
<p>My machine (with docker) has ip-address 192.168.2.29 and I give my VisionFive 2 the ip 192.168.2.222</p>
<p>This will be the commands (for the Ubuntu firmware):</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># set the ip of the VisionFive 2, and of the server (where docker is running)</span>
</span></span><span class="line"><span class="cl">$ setenv ipaddr 192.168.2.222<span class="p">;</span> setenv serverip 192.168.2.29
</span></span><span class="line"><span class="cl"><span class="c1"># check connection</span>
</span></span><span class="line"><span class="cl">$ ping 192.168.2.29
</span></span><span class="line"><span class="cl"><span class="c1"># Initialize SPI Flash</span>
</span></span><span class="line"><span class="cl">$ sf probe
</span></span><span class="line"><span class="cl"><span class="c1"># Download and Update SPL binary</span>
</span></span><span class="line"><span class="cl">$ tftpboot 0xa0000000 <span class="si">${</span><span class="nv">serverip</span><span class="si">}</span>:ubuntu/u-boot-spl.bin.normal.out
</span></span><span class="line"><span class="cl">$ sf update 0xa0000000 0x0 <span class="nv">$filesize</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Download and Update U-Boot binary</span>
</span></span><span class="line"><span class="cl">$ tftpboot 0xa0000000 <span class="si">${</span><span class="nv">serverip</span><span class="si">}</span>:ubuntu/u-boot.itb
</span></span><span class="line"><span class="cl">$ sf update 0xa0000000 0x100000 <span class="nv">$filesize</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Reset the default (default load options)</span>
</span></span><span class="line"><span class="cl">$ env default -f -a
</span></span><span class="line"><span class="cl"><span class="c1"># Save your changes</span>
</span></span><span class="line"><span class="cl">$ env save</span></span></code></pre></div></div>
<p>It will look somethink like this:</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Hit any key to stop autoboot:  <span class="m">0</span> 
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># setenv ipaddr 192.168.2.222; setenv serverip 192.168.2.29</span>
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># ping 192.168.2.29</span>
</span></span><span class="line"><span class="cl">ethernet@16030000 Waiting <span class="k">for</span> PHY auto negotiation to complete....... <span class="k">done</span>
</span></span><span class="line"><span class="cl">Using ethernet@16030000 device
</span></span><span class="line"><span class="cl">host 192.168.2.29 is alive
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># sf probe</span>
</span></span><span class="line"><span class="cl">SF: Detected gd25lq128 with page size <span class="m">256</span> Bytes, erase size <span class="m">4</span> KiB, total <span class="m">16</span> MiB
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># tftpboot 0xa0000000 ${serverip}:ubuntu/u-boot-spl.bin.normal.out</span>
</span></span><span class="line"><span class="cl">Using ethernet@16030000 device
</span></span><span class="line"><span class="cl">TFTP from server 192.168.2.29<span class="p">;</span> our IP address is 192.168.2.222
</span></span><span class="line"><span class="cl">Filename <span class="s1">&#39;ubuntu/u-boot-spl.bin.normal.out&#39;</span>.
</span></span><span class="line"><span class="cl">Load address: 0xa0000000
</span></span><span class="line"><span class="cl">Loading: <span class="c1">##########</span>
</span></span><span class="line"><span class="cl">         900.4 KiB/s
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">Bytes <span class="nv">transferred</span> <span class="o">=</span> <span class="m">139367</span> <span class="o">(</span><span class="m">22067</span> hex<span class="o">)</span>
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># sf update 0xa0000000 0x0 $filesize</span>
</span></span><span class="line"><span class="cl">device <span class="m">0</span> offset 0x0, size 0x22067
</span></span><span class="line"><span class="cl"><span class="m">139367</span> bytes written, <span class="m">0</span> bytes skipped in 0.802s, speed <span class="m">177281</span> B/s
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># tftpboot 0xa0000000 ${serverip}:ubuntu/u-boot.itb</span>
</span></span><span class="line"><span class="cl">Using ethernet@16030000 device
</span></span><span class="line"><span class="cl">TFTP from server 192.168.2.29<span class="p">;</span> our IP address is 192.168.2.222
</span></span><span class="line"><span class="cl">Filename <span class="s1">&#39;ubuntu/u-boot.itb&#39;</span>.
</span></span><span class="line"><span class="cl">Load address: 0xa0000000
</span></span><span class="line"><span class="cl">Loading: <span class="c1">#################################################################</span>
</span></span><span class="line"><span class="cl">         <span class="c1">####</span>
</span></span><span class="line"><span class="cl">         1010.7 KiB/s
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">Bytes <span class="nv">transferred</span> <span class="o">=</span> <span class="m">1005851</span> <span class="o">(</span>f591b hex<span class="o">)</span>
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># sf update 0xa0000000 0x100000 $filesize</span>
</span></span><span class="line"><span class="cl">device <span class="m">0</span> offset 0x100000, size 0xf591b
</span></span><span class="line"><span class="cl"><span class="m">932123</span> bytes written, <span class="m">73728</span> bytes skipped in 7.618s, speed <span class="m">135134</span> B/s
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># env default -f -a</span>
</span></span><span class="line"><span class="cl"><span class="c1">## Resetting to default environment</span>
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># env save</span>
</span></span><span class="line"><span class="cl">Saving Environment to SPIFlash... Erasing SPI flash...Writing to SPI flash...done
</span></span><span class="line"><span class="cl">OK</span></span></code></pre></div></div>
<p>Done!</p>
<p>You can turn off the VisionFive 2 again and hit Ctrl+C to stop docker.</p>

<h2 class="relative group">Create the SD-card
    <div id="create-the-sd-card" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#create-the-sd-card" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>I used <code>balenaEtcher</code> to flash a SD-card with <code>ubuntu-23.10-preinstalled-server-riscv64+visionfive2.img</code>.</p>

<h2 class="relative group">Fedora install packages
    <div id="fedora-install-packages" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#fedora-install-packages" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>I have installed Fedora linux and had to install some stuff to be able to cross compile</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo dnf group install <span class="s2">&#34;Development Tools&#34;</span>
</span></span><span class="line"><span class="cl">sudo dnf install git gcc-plugin-devel libmpc-devel gcc-c++ gcc-c++-riscv64-linux-gnu ncurses-devel libmpc-devel</span></span></code></pre></div></div>

<h2 class="relative group">Building the Linux Kernel
    <div id="building-the-linux-kernel" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#building-the-linux-kernel" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Building a kernel of the source code from StarFive</p>
<p>I build this on my own machine, otherwise it will take a very long time. so cross compile!
Everything is neatly explained if you click through to the &ldquo;linux&rdquo; repo of all (yet) custom code for the SBC. <a href="https://github.com/starfive-tech/VisionFive2"  target="_blank" rel="noreferrer">link</a></p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ mkdir ~/Downloads/SF2_2023_11_20/visionfive2
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> ~/Downloads/SF2_2023_11_20/visionfive2
</span></span><span class="line"><span class="cl"><span class="c1"># we need the firmware for AMD / ATI cards, we do not need history so depth 1</span>
</span></span><span class="line"><span class="cl">$ git clone --depth <span class="m">1</span> git://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git linux-firmware
</span></span><span class="line"><span class="cl">Cloning into <span class="s1">&#39;linux-firmware&#39;</span>...
</span></span><span class="line"><span class="cl">remote: Enumerating objects: 3126, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Counting objects: 100% <span class="o">(</span>3126/3126<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Compressing objects: 100% <span class="o">(</span>2281/2281<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Total <span class="m">3126</span> <span class="o">(</span>delta 1061<span class="o">)</span>, reused <span class="m">2423</span> <span class="o">(</span>delta 751<span class="o">)</span>, pack-reused <span class="m">0</span>
</span></span><span class="line"><span class="cl">Receiving objects: 100% <span class="o">(</span>3126/3126<span class="o">)</span>, 428.00 MiB <span class="p">|</span> 13.40 MiB/s, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Resolving deltas: 100% <span class="o">(</span>1061/1061<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Updating files: 100% <span class="o">(</span>3248/3248<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#Check out the last kernel, we do not need history so depth 1</span>
</span></span><span class="line"><span class="cl">$ git clone --branch VF2_v3.8.2 --depth <span class="m">1</span> https://github.com/starfive-tech/linux.git
</span></span><span class="line"><span class="cl">Cloning into <span class="s1">&#39;linux&#39;</span>...
</span></span><span class="line"><span class="cl">remote: Enumerating objects: 79432, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Counting objects: 100% <span class="o">(</span>79432/79432<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Compressing objects: 100% <span class="o">(</span>74286/74286<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Total <span class="m">79432</span> <span class="o">(</span>delta 7390<span class="o">)</span>, reused <span class="m">21741</span> <span class="o">(</span>delta 4319<span class="o">)</span>, pack-reused <span class="m">0</span>
</span></span><span class="line"><span class="cl">Receiving objects: 100% <span class="o">(</span>79432/79432<span class="o">)</span>, 213.11 MiB <span class="p">|</span> 6.87 MiB/s, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Resolving deltas: 100% <span class="o">(</span>7390/7390<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Note: switching to <span class="s1">&#39;b133739ab239ec9e5cd9bc4a15817145989021e4&#39;</span>.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">You are in <span class="s1">&#39;detached HEAD&#39;</span> state. You can look around, make experimental
</span></span><span class="line"><span class="cl">changes and commit them, and you can discard any commits you make in this
</span></span><span class="line"><span class="cl">state without impacting any branches by switching back to a branch.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">If you want to create a new branch to retain commits you create, you may
</span></span><span class="line"><span class="cl"><span class="k">do</span> so <span class="o">(</span>now or later<span class="o">)</span> by using -c with the switch command. Example:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  git switch -c &lt;new-branch-name&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Or undo this operation with:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  git switch -
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Turn off this advice by setting config variable advice.detachedHead to <span class="nb">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Updating files: 100% <span class="o">(</span>74883/74883<span class="o">)</span>, <span class="k">done</span>.</span></span></code></pre></div></div>
<p>I had to patch the kernel because I am using gcc-13: <a href="https://lore.kernel.org/lkml/DB6P189MB05681E9F4785DF2758B9875B9CA49@DB6P189MB0568.EURP189.PROD.OUTLOOK.COM/t/"  target="_blank" rel="noreferrer">link</a></p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-patch" data-lang="patch"><span class="line"><span class="cl">*** ../linux-5.18/scripts/gcc-plugins/gcc-common.h  2022-03-20 20:14:17.0000
</span></span><span class="line"><span class="cl">00000 +0000
</span></span><span class="line"><span class="cl"><span class="gd">--- scripts/gcc-plugins/gcc-common.h  2022-06-08 09:21:21.693178983 +0100
</span></span></span><span class="line"><span class="cl"><span class="gd"></span>***************
</span></span><span class="line"><span class="cl">*** 71,76 ****
</span></span><span class="line"><span class="cl"><span class="gd">--- 71,78 ----
</span></span></span><span class="line"><span class="cl"><span class="gd"></span>  #include &#34;varasm.h&#34;
</span></span><span class="line"><span class="cl">  #include &#34;stor-layout.h&#34;
</span></span><span class="line"><span class="cl">  #include &#34;internal-fn.h&#34;
</span></span><span class="line"><span class="cl"><span class="gi">+ #include &#34;gimple.h&#34;
</span></span></span><span class="line"><span class="cl"><span class="gi">+ #include &#34;gimple-iterator.h&#34;
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  #include &#34;gimple-expr.h&#34;
</span></span><span class="line"><span class="cl">  #include &#34;gimple-fold.h&#34;
</span></span><span class="line"><span class="cl">  #include &#34;context.h&#34;
</span></span></code></pre></div></div>
<p>I used VS-Code to edit the file.</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="img"
    width="939"
    height="878"
    src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/update_gcc_common_h_hu_947af238f395ca2b.png"
    srcset="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/update_gcc_common_h_hu_947af238f395ca2b.png 800w, /posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/update_gcc_common_h.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/update_gcc_common_h.png"></figure>
<p>Now we have the configure a new kernel 5.15 that workes with VisionFive 2 and an AMD/ATI Hawaii PRO [Radeon R9 290/390].
We can use the instructions of the other branch <a href="https://github.com/starfive-tech/linux/tree/JH7110_VisionFive2_upstream"  target="_blank" rel="noreferrer">link</a>. Here and there I deviated a little from it.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># go to checkout code</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> ~/Downloads/SF2_2023_11_20/visionfive2/linux
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create the .config with all you need for only the StarFive VisionFive 2</span>
</span></span><span class="line"><span class="cl">make <span class="nv">ARCH</span><span class="o">=</span>riscv <span class="nv">CROSS_COMPILE</span><span class="o">=</span>riscv64-linux-gnu- starfive_jh7110_defconfig <span class="c1"># starfive_jh7110_defconfig -&gt; we need PCI-e what is not enabled in starfive_visionfive2_defconfig</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># open the menu</span>
</span></span><span class="line"><span class="cl">make <span class="nv">CROSS_COMPILE</span><span class="o">=</span>riscv64-linux-gnu- <span class="nv">ARCH</span><span class="o">=</span>riscv menuconfig</span></span></code></pre></div></div>
<p>Now we have to add the ATI video-card and HDMI-audio.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Device Drivers ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">  Generic Driver Options ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">    Firmware loader ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">      () Build named firmware blobs into the kernel binary [HIT ENTER]
</span></span><span class="line"><span class="cl">      (/lib/firmware) Firmware blobs root directory [change it to ../linux-firmware]</span></span></code></pre></div></div>
<p>enter this in the line:</p>
<p>(radeon bins for ATI Radeon 5450, amdgpu/radeon bin files of AMD/ATI Hawaii PRO [Radeon R9 290/390] (has 2 drivers amd and ATI) and bin driver for my wifi dongel)</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">radeon/CYPRESS_uvd.bin radeon/CEDAR_smc.bin radeon/CEDAR_me.bin radeon/CEDAR_pfp.bin radeon/CEDAR_rlc.bin amdgpu/hawaii_k_smc.bin amdgpu/hawaii_smc.bin amdgpu/hawaii_uvd.bin amdgpu/hawaii_vce.bin amdgpu/hawaii_sdma.bin amdgpu/hawaii_sdma1.bin amdgpu/hawaii_pfp.bin amdgpu/hawaii_me.bin amdgpu/hawaii_ce.bin amdgpu/hawaii_rlc.bin amdgpu/hawaii_mec.bin amdgpu/hawaii_mc.bin radeon/hawaii_pfp.bin radeon/hawaii_me.bin radeon/hawaii_ce.bin radeon/hawaii_mec.bin radeon/hawaii_mc.bin radeon/hawaii_rlc.bin radeon/hawaii_sdma.bin radeon/hawaii_smc.bin radeon/hawaii_k_smc.bin radeon/HAWAII_pfp.bin radeon/HAWAII_me.bin radeon/HAWAII_ce.bin radeon/HAWAII_mec.bin radeon/HAWAII_mc.bin radeon/HAWAII_mc2.bin radeon/HAWAII_rlc.bin radeon/HAWAII_sdma.bin radeon/HAWAII_smc.bin rt2870.bin</span></span></span></code></pre></div></div>
<p>Select Exit,Exit</p>
<p>We need some stuff for snapd:</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Device Drivers -&gt; 
</span></span><span class="line"><span class="cl">    Block devices -&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">      &lt;*&gt; RAM block device support [HIT SPACE 2x]</span></span></code></pre></div></div>
<p>Select Exit</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Device Drivers -&gt; 
</span></span><span class="line"><span class="cl">    Network device support ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">      Wireless LAN ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">        &lt;*&gt; Ralink driver support ---- [HIT SPACE 2x][HIT ENTER]
</span></span><span class="line"><span class="cl">          &lt;*&gt; Ralink rt27xx/rt28xx/rt30xx (USB) [HIT SPACE 2x]
</span></span><span class="line"><span class="cl">          [*] rt2800usb - Incl..... 6x [HIT SPACE 1x on 4 rows]</span></span></code></pre></div></div>
<p>Select Exit,Exit,Exit</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Device Drivers ---&gt;
</span></span><span class="line"><span class="cl">  Graphics support ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">    &lt;*&gt; ATI GPU [HIT SPACE]
</span></span><span class="line"><span class="cl">    &lt;*&gt; AMD GPU [HIT SPACE 2x]
</span></span><span class="line"><span class="cl">    [*] Enable amdgpu support for SI parts [HIT SPACE]
</span></span><span class="line"><span class="cl">    [*] Enable amdgpu support for CIK parts [HIT SPACE]
</span></span><span class="line"><span class="cl">    ACP (Audio CoProcessor) Configuration ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">      [*] Enable AMD Audio CoProcessor IP support [HIT SPACE]</span></span></code></pre></div></div>
<p>Select Exit,Exit</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Device Drivers ---&gt;
</span></span><span class="line"><span class="cl">  Sound card support ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">    Advanced Linux Sound Architecture ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">      HD-Audio ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">        &lt;*&gt; HD Audio PCI [HIT SPACE 2x]
</span></span><span class="line"><span class="cl">        &lt;*&gt; Build HDMI/DisplayPort HD-audio codec support [HIT SPACE 2x]</span></span></code></pre></div></div>
<p>Select Exit,Exit,Exit,Exit</p>
<p>We need more some stuff for snapd:</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">File systems  -&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">  Miscellaneous filesystems -&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">    &lt;*&gt; SquashFS 4.0 - Squased file system support [HIT SPACE 2x]
</span></span><span class="line"><span class="cl">    [*] Squashfs XATTR support [HIT SPACE]
</span></span><span class="line"><span class="cl">    [*] Include support for ZLIB compressed file systems
</span></span><span class="line"><span class="cl">    [*] Include support for LZ4 compressed file systems [HIT SPACE]
</span></span><span class="line"><span class="cl">    [*] Include support for LZO compressed file systems [HIT SPACE]
</span></span><span class="line"><span class="cl">    [*] Include support for XZ compressed file systems [HIT SPACE]
</span></span><span class="line"><span class="cl">    [*] Include support for ZSTD compressed file systems [HIT SPACE]</span></span></code></pre></div></div>
<p>Select Exit,Exit</p>
<p>We need CONFIG_SECCOMP and CONFIG_SECCOMP_FILTER for the <code>epiphany</code> browser</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">General architecture-dependent options  ---&gt; [HIT ENTER]
</span></span><span class="line"><span class="cl">  [*] Enable seccomp to safely execute untrusted bytecode -&gt; [HIT SPACE]</span></span></code></pre></div></div>
<p>Select Exit,Exit</p>
<p>Yes You wish to save your new configuration!</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># We can compile the kernel, I have 16 cores in my machine... so I added -j 16</span>
</span></span><span class="line"><span class="cl">$ make <span class="nv">ARCH</span><span class="o">=</span>riscv <span class="nv">CROSS_COMPILE</span><span class="o">=</span>riscv64-linux-gnu- -j <span class="m">16</span>
</span></span><span class="line"><span class="cl">scripts/extract-cert.c: In <span class="k">function</span> ‘display_openssl_errors’:
</span></span><span class="line"><span class="cl">scripts/extract-cert.c:46:9: warning: ‘ERR_get_error_line’ is deprecated: Since OpenSSL 3.0 <span class="o">[</span>-Wdeprecated-declarations<span class="o">]</span>
</span></span><span class="line"><span class="cl">   <span class="m">46</span> <span class="p">|</span>         <span class="k">while</span> <span class="o">((</span><span class="nv">e</span> <span class="o">=</span> ERR_get_error_line<span class="o">(</span><span class="p">&amp;</span>file, <span class="p">&amp;</span>line<span class="o">)))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>         ^~~~~
</span></span><span class="line"><span class="cl">In file included from scripts/extract-cert.c:23:
</span></span><span class="line"><span class="cl">/usr/include/openssl/err.h:423:15: note: declared here
</span></span><span class="line"><span class="cl">  <span class="m">423</span> <span class="p">|</span> unsigned long ERR_get_error_line<span class="o">(</span>const char **file, int *line<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>               ^~~~~~~~~~~~~~~~~~
</span></span><span class="line"><span class="cl">scripts/extract-cert.c: In <span class="k">function</span> ‘drain_openssl_errors’:
</span></span><span class="line"><span class="cl">scripts/extract-cert.c:59:9: warning: ‘ERR_get_error_line’ is deprecated: Since OpenSSL 3.0 <span class="o">[</span>-Wdeprecated-declarations<span class="o">]</span>
</span></span><span class="line"><span class="cl">   <span class="m">59</span> <span class="p">|</span>         <span class="k">while</span> <span class="o">(</span>ERR_get_error_line<span class="o">(</span><span class="p">&amp;</span>file, <span class="p">&amp;</span>line<span class="o">))</span> <span class="o">{}</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>         ^~~~~
</span></span><span class="line"><span class="cl">/usr/include/openssl/err.h:423:15: note: declared here
</span></span><span class="line"><span class="cl">  <span class="m">423</span> <span class="p">|</span> unsigned long ERR_get_error_line<span class="o">(</span>const char **file, int *line<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">.......
</span></span><span class="line"><span class="cl">.......
</span></span><span class="line"><span class="cl">.......
</span></span><span class="line"><span class="cl">.......
</span></span><span class="line"><span class="cl">drivers/gpu/drm/amd/amdgpu/../display/dc/dce/dce_aux.c: In <span class="k">function</span> ‘dce_aux_transfer_with_retries’:
</span></span><span class="line"><span class="cl">drivers/gpu/drm/amd/amdgpu/../display/dc/dce/dce_aux.c:704:32: warning: storing the address of <span class="nb">local</span> variable ‘reply’ in ‘*payload.reply’ <span class="o">[</span>-Wdangling-pointer<span class="o">=]</span>
</span></span><span class="line"><span class="cl">  <span class="m">704</span> <span class="p">|</span>                 payload-&gt;reply <span class="o">=</span> <span class="p">&amp;</span>reply<span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>                 ~~~~~~~~~~~~~~~^~~~~~~~
</span></span><span class="line"><span class="cl">drivers/gpu/drm/amd/amdgpu/../display/dc/dce/dce_aux.c:687:17: note: ‘reply’ declared here
</span></span><span class="line"><span class="cl">  <span class="m">687</span> <span class="p">|</span>         uint8_t reply<span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>                 ^~~~~
</span></span><span class="line"><span class="cl">drivers/gpu/drm/amd/amdgpu/../display/dc/dce/dce_aux.c:684:37: note: ‘payload’ declared here
</span></span><span class="line"><span class="cl">  <span class="m">684</span> <span class="p">|</span>                 struct aux_payload *payload<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>                 ~~~~~~~~~~~~~~~~~~~~^~~~~~~
</span></span><span class="line"><span class="cl">$</span></span></code></pre></div></div>
<p>The kernel is Done! Now copy it to the boot partition on the SD-card!</p>

<h2 class="relative group">BOOT/ROOT Copy kernel
    <div id="bootroot-copy-kernel" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#bootroot-copy-kernel" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>We need the initrd-img of 5.15.0 from VisionFive 2, so we don&rsquo;t have to make it ourselves.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># create a loop device of image</span>
</span></span><span class="line"><span class="cl">sudo losetup -f -P ~/Downloads/SF2_2023_11_20/starfive-jh7110-VF2_515_v3.8.2-66-SD-minimal-desktop-wayland.img
</span></span><span class="line"><span class="cl"><span class="c1"># find your loop device</span>
</span></span><span class="line"><span class="cl">$ losetup -a <span class="c1"># or -l</span>
</span></span><span class="line"><span class="cl">/dev/loop0: <span class="o">[]</span>: <span class="o">(</span>/home/opvolger/Downloads/SF2_2023_11_20/starfive-jh7110-VF2_515_v3.8.2-66-SD-minimal-desktop-wayland.img<span class="o">)</span>
</span></span><span class="line"><span class="cl">$ lsblk
</span></span><span class="line"><span class="cl">NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
</span></span><span class="line"><span class="cl">loop0         7:0    <span class="m">0</span>   3,9G  <span class="m">0</span> loop 
</span></span><span class="line"><span class="cl">├─loop0p1   259:7    <span class="m">0</span>     2M  <span class="m">0</span> part 
</span></span><span class="line"><span class="cl">├─loop0p2   259:8    <span class="m">0</span>     4M  <span class="m">0</span> part 
</span></span><span class="line"><span class="cl">├─loop0p3   259:9    <span class="m">0</span>   100M  <span class="m">0</span> part 
</span></span><span class="line"><span class="cl">└─loop0p4   259:10   <span class="m">0</span>   3,8G  <span class="m">0</span> part 
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl"><span class="c1"># create dir</span>
</span></span><span class="line"><span class="cl">$ mkdir -p ~/Downloads/SF2_2023_11_20/visionfive2/mount
</span></span><span class="line"><span class="cl"><span class="c1"># mount to dir</span>
</span></span><span class="line"><span class="cl">$ sudo mount /dev/loop0p3 ~/Downloads/SF2_2023_11_20/visionfive2/mount
</span></span><span class="line"><span class="cl"><span class="c1"># copy initrd img</span>
</span></span><span class="line"><span class="cl">$ cp ~/Downloads/SF2_2023_11_20/visionfive2/mount/initrd.img-5.15.0-starfive ~/Downloads/SF2_2023_11_20/visionfive2
</span></span><span class="line"><span class="cl"><span class="c1"># umount</span>
</span></span><span class="line"><span class="cl">$ sudo umount /dev/loop0p3
</span></span><span class="line"><span class="cl"><span class="c1"># detache loop device</span>
</span></span><span class="line"><span class="cl">$ sudo losetup -d /dev/loop0</span></span></code></pre></div></div>
<p>We have the SD-card inserted (again). Mount the sd-card (cloudimg-rootfs)
Now we need to mount the first partition of the SD-card. my is mounted on <code>/run/media/opvolger/cloudimg-rootfs/</code> after a click in KDE :)</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># go to checkout code</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> ~/Downloads/SF2_2023_11_20/visionfive2/linux
</span></span><span class="line"><span class="cl"><span class="c1"># copy the kernel to the sd-card</span>
</span></span><span class="line"><span class="cl">$ sudo cp arch/riscv/boot/Image.gz /run/media/opvolger/cloudimg-rootfs/boot/vmlinuz-5.15.0-dirty
</span></span><span class="line"><span class="cl"><span class="c1"># copy the System map</span>
</span></span><span class="line"><span class="cl">$ sudo cp System.map /run/media/opvolger/cloudimg-rootfs/boot/System.map-5.15.0-dirty
</span></span><span class="line"><span class="cl"><span class="c1"># copy the dtb (Device Tree) to the sd-card</span>
</span></span><span class="line"><span class="cl">$ sudo cp arch/riscv/boot/dts/starfive/jh7110-visionfive-v2.dtb /run/media/opvolger/cloudimg-rootfs/boot/dtb-5.15.0-dirty
</span></span><span class="line"><span class="cl"><span class="c1"># copy initrd to the sd-card</span>
</span></span><span class="line"><span class="cl">$ sudo cp ~/Downloads/SF2_2023_11_20/visionfive2/initrd.img-5.15.0-starfive /run/media/opvolger/cloudimg-rootfs/boot/initrd.img-5.15.0-dirty
</span></span><span class="line"><span class="cl"><span class="c1"># we have now all the 4 files we need</span></span></span></code></pre></div></div>
<p>Now we need a custom boot option (the kernel we have made)</p>
<p>edit <code>40_custom</code> in <code>/run/media/opvolger/cloudimg-rootfs/etc/grub.d/</code></p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1">#!/bin/sh</span>
</span></span><span class="line"><span class="cl"><span class="na">exec tail -n +3 $0</span>
</span></span><span class="line"><span class="cl"><span class="c1"># This file provides an easy way to add custom menu entries.  Simply type the</span>
</span></span><span class="line"><span class="cl"><span class="c1"># menu entries you want to add after this comment.  Be careful not to change</span>
</span></span><span class="line"><span class="cl"><span class="c1"># the &#39;exec tail&#39; line above.</span>
</span></span><span class="line"><span class="cl"><span class="na">menuentry &#39;Ubuntu StarFive VisionFive 2 5.15.0-dirty&#39; --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option &#39;gnulinux-simple-5-15-0-dirty&#39; {</span>
</span></span><span class="line"><span class="cl">        <span class="na">load_video</span>
</span></span><span class="line"><span class="cl">        <span class="na">insmod gzio</span>
</span></span><span class="line"><span class="cl">        <span class="na">if [ x$grub_platform</span> <span class="o">=</span> <span class="s">xxen ]; then insmod xzio; insmod lzopio; fi
</span></span></span><span class="line"><span class="cl"><span class="s">        insmod part_gpt
</span></span></span><span class="line"><span class="cl"><span class="s">        insmod ext2
</span></span></span><span class="line"><span class="cl"><span class="s">        search --no-floppy --fs-uuid --set=root 40249bdb-adbf-44bf-a50e-74b81c1200d7
</span></span></span><span class="line"><span class="cl"><span class="s">        echo    &#39;Loading Linux 5.15.0-dirty ...&#39;
</span></span></span><span class="line"><span class="cl"><span class="s">        linux   /boot/vmlinuz-5.15.0-dirty root=LABEL=cloudimg-rootfs ro  efi=debug earlycon sysctl.kernel.watchdog_thresh=60
</span></span></span><span class="line"><span class="cl"><span class="s">        echo    &#39;Loading initial ramdisk ...&#39;
</span></span></span><span class="line"><span class="cl"><span class="s">        initrd  /boot/initrd.img-5.15.0-dirty
</span></span></span><span class="line"><span class="cl"><span class="s">        echo    &#39;Loading device tree blob...&#39;
</span></span></span><span class="line"><span class="cl"><span class="s">        devicetree      /boot/dtb-5.15.0-dirty</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span></span></span></code></pre></div></div>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nano /run/media/opvolger/cloudimg-rootfs/etc/grub.d/40_custom
</span></span><span class="line"><span class="cl"><span class="c1"># Copy the text above</span></span></span></code></pre></div></div>

<h2 class="relative group">Setup Ubuntu with ubuntu kernel and firmware
    <div id="setup-ubuntu-with-ubuntu-kernel-and-firmware" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#setup-ubuntu-with-ubuntu-kernel-and-firmware" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Put the SD-Card in the VisionFive 2 without an external GPU and use the USB to TTL.</p>
<p>Turn on the VisionFive 2</p>
<p>If booting is not working, reflash the firmware but skip the command <code>env default -f -a</code>. I had this problem (sometimes?).</p>
<p>Ubuntu will boot with the kernel and firmware from Ubuntu!</p>
<p>You will get to setup your ubuntu password (default is ubuntu/ubuntu).</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">-----BEGIN SSH HOST KEY KEYS-----
</span></span><span class="line"><span class="cl">ecdsa-sha2-nistp256 AAAAB2VjZHNhLXNoYTItbmlzdHByNTYAAAAIbmlzdHAyNTYAAABBBNPq5SLKgBXEcCWZwAequ9Qr9af/PSurVzwNX3XIF/CAutf/aMGsOtBIyH5mk44HdLmtNLoM+voHsiZZ2/I8uCU<span class="o">=</span> root@
</span></span><span class="line"><span class="cl">ubuntu
</span></span><span class="line"><span class="cl">ssh-ed25519 AAAAC3NzaC1lZBI1NTE5AAAAIGFLC6yXTpRmdkQstt6l2vzoJHRkQfvFllD3sVNg0L3o root@ubuntu
</span></span><span class="line"><span class="cl">ssh-rsa AAAAB3NzaC1yc2EAAABDAQABAAABgQC1nU/WOAedfYMyRYSLXWHgsDd8brhSlYYLMCpS00Lv2CJr037RUe+v5TfzPqbBw9xech8lFruZxzJ0AHJx4kbu34va9de6xSVLjD+5cHE343pn0eXi4VI9KT9bnN42h2
</span></span><span class="line"><span class="cl">1+7q/yGv2+ALQJ48Gi/AvuDnWKFXa8i4LOqlVjbnfutpko6bdw1ogttRXF8Lh7PacU6XihfQ7R5yPk0r2Kw0eFPT8vLRWp5OmT2KJaMg0K/UE0+Avv5zLq5axvSchA4pbeQ0NhgCw7NQUmuFha3ZUf/saksiohAtXUo2AF
</span></span><span class="line"><span class="cl">HB3crZFM39ffyHaZyycP0rSMCU3ErCsV3YYRWJZ34A0t7+4fxdWUfhB1+hxm9D8EovTtB6/K1qiEU5/b7fP4n2wuBlpMhn/Nt/UG3vJ/jxtfLCoNHTL4iFdhP33mpnpB7uVZxR9TGI22+EQO5HyXSMF5HI4CGUr2bo2/ud
</span></span><span class="line"><span class="cl">A/QNZScPICD9Hfq1MFS553M2dINFpFmVuvSqK3u0w4sW7ErB2Xr/U<span class="o">=</span> root@ubuntu
</span></span><span class="line"><span class="cl">-----END SSH HOST KEY KEYS-----
</span></span><span class="line"><span class="cl"><span class="o">[</span>  127.899234<span class="o">]</span> cloud-init<span class="o">[</span>1714<span class="o">]</span>: Cloud-init v. 23.3.1-0ubuntu2 finished at Mon, <span class="m">20</span> Nov <span class="m">2023</span> 23:21:04 +0000. Datasource DataSourceNoCloud <span class="o">[</span><span class="nv">seed</span><span class="o">=</span>/var/lib/cloud/seed/noc
</span></span><span class="line"><span class="cl">loud-net<span class="o">][</span><span class="nv">dsmode</span><span class="o">=</span>net<span class="o">]</span>.  Up 127.87 seconds
</span></span><span class="line"><span class="cl"><span class="o">[</span>  OK  <span class="o">]</span> Finished cloud-final.servi… Execute cloud user/final scripts.
</span></span><span class="line"><span class="cl"><span class="o">[</span>  OK  <span class="o">]</span> Reached target cloud-init.target - Cloud-init target.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ubuntu 23.10 ubuntu ttyS0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ubuntu login: ubuntu
</span></span><span class="line"><span class="cl">Password: 
</span></span><span class="line"><span class="cl">You are required to change your password immediately <span class="o">(</span>administrator enforced<span class="o">)</span>.
</span></span><span class="line"><span class="cl">Changing password <span class="k">for</span> ubuntu.
</span></span><span class="line"><span class="cl">Current password: 
</span></span><span class="line"><span class="cl">New password: 
</span></span><span class="line"><span class="cl">Retype new password: 
</span></span><span class="line"><span class="cl">Welcome to Ubuntu 23.10 <span class="o">(</span>GNU/Linux 6.5.0-9-generic riscv64<span class="o">)</span>
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl">To run a <span class="nb">command</span> as administrator <span class="o">(</span>user <span class="s2">&#34;root&#34;</span><span class="o">)</span>, use <span class="s2">&#34;sudo &lt;command&gt;&#34;</span>.
</span></span><span class="line"><span class="cl">See <span class="s2">&#34;man sudo_root&#34;</span> <span class="k">for</span> details.</span></span></code></pre></div></div>
<p>Now we will change the default boot option of Grub
We will edit <code>etc/default/grub</code></p>
<p>The default boot option is now <code>GRUB_DEFAULT=0</code> we will change that to <code>GRUB_DEFAULT=2</code>. The boot options start counting with 0, so we need option number 3 (That is 2).</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ubuntu@ubuntu:~$ sudo nano /etc/default/grub
</span></span><span class="line"><span class="cl"><span class="c1"># now change `GRUB_DEFAULT=0` to `GRUB_DEFAULT=2`</span>
</span></span><span class="line"><span class="cl"><span class="c1"># We will now update grub with the custom kernel and menuentry</span>
</span></span><span class="line"><span class="cl">ubuntu@ubuntu:~$ sudo update-grub
</span></span><span class="line"><span class="cl">Sourcing file <span class="s1">&#39;/etc/default/grub&#39;</span>
</span></span><span class="line"><span class="cl">Sourcing file <span class="s1">&#39;/etc/default/grub.d/10_cmdline.cfg&#39;</span>
</span></span><span class="line"><span class="cl">Sourcing file <span class="s1">&#39;/etc/default/grub.d/90_watchdog-thresh.cfg&#39;</span>
</span></span><span class="line"><span class="cl">Generating grub configuration file ...
</span></span><span class="line"><span class="cl">Found linux image: /boot/vmlinuz-6.5.0-9-generic
</span></span><span class="line"><span class="cl">Found initrd image: /boot/initrd.img-6.5.0-9-generic
</span></span><span class="line"><span class="cl">Found linux image: /boot/vmlinuz-5.15.0-dirty
</span></span><span class="line"><span class="cl">Found initrd image: /boot/initrd.img-5.15.0-dirty
</span></span><span class="line"><span class="cl">Warning: os-prober will not be executed to detect other bootable partitions.
</span></span><span class="line"><span class="cl">Systems on them will not be added to the GRUB boot configuration.
</span></span><span class="line"><span class="cl">Check GRUB_DISABLE_OS_PROBER documentation entry.
</span></span><span class="line"><span class="cl">Adding boot menu entry <span class="k">for</span> UEFI Firmware Settings ...
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="c1"># turn it off</span>
</span></span><span class="line"><span class="cl">ubuntu@ubuntu:~$ sudo halt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Broadcast message from root@ubuntu on pts/0 <span class="o">(</span>Tue 2023-11-21 19:51:40 UTC<span class="o">)</span>:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The system will halt now!
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ubuntu@ubuntu:~$ <span class="o">[</span>  366.522166<span class="o">]</span> reboot: System halted</span></span></code></pre></div></div>
<p>Turn off the VisionFive2 and remove the CD-card.</p>

<h2 class="relative group">Update firmware VisionFive 2 to 3.8.2
    <div id="update-firmware-visionfive-2-to-382" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#update-firmware-visionfive-2-to-382" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Now we need to update firmware of the board to the version of VisionFive2.</p>
<p>I updated my board to <code>VisionFive2 Software v3.8.2</code></p>
<p>We will use the firmware from StarFive (with there kernel-source-build 5.15.0-dirty) if you want to use an extenal GPU without a crash within 1a10 minutes. We can not start a Ubuntu kernel with the firmware of StarFive!</p>
<p>I didn&rsquo;t get it working with the sdcard.img (like last times) to flash my VisionFive 2, so I used tftp. I used the docker <a href="https://hub.docker.com/r/pghalliday/tftp"  target="_blank" rel="noreferrer">image</a></p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">cd</span> ~/Downloads/SF2_2023_11_20
</span></span><span class="line"><span class="cl">$ docker run -p 0.0.0.0:69:69/udp -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/var/tftpboot -i -t pghalliday/tftp
</span></span><span class="line"><span class="cl">Unable to find image <span class="s1">&#39;pghalliday/tftp:latest&#39;</span> locally
</span></span><span class="line"><span class="cl">latest: Pulling from pghalliday/tftp
</span></span><span class="line"><span class="cl">fae91920dcd4: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">0bb6771b2292: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">Digest: sha256:59f843a93d62ac6e2fa475ee3d1a3786464fe5ea0334e6f1ea79bdec837f09fa
</span></span><span class="line"><span class="cl">Status: Downloaded newer image <span class="k">for</span> pghalliday/tftp:latest</span></span></code></pre></div></div>
<p>Boot up your VisionFive 2 without a SD-card and the USB to TTL connected (see <a href="https://doc-en.rvspace.org/VisionFive2/PDF/VisionFive2_QSG.pdf"  target="_blank" rel="noreferrer">link</a> for more information)</p>
<p>My machine (with docker) has ip-address 192.168.2.29 and I give my VisionFive 2 the ip 192.168.2.222</p>
<p>This will be the commands (for the StarFive firmware):</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># set the ip of the VisionFive 2, and of the server (where docker is running)</span>
</span></span><span class="line"><span class="cl">$ setenv ipaddr 192.168.2.222<span class="p">;</span> setenv serverip 192.168.2.29
</span></span><span class="line"><span class="cl"><span class="c1"># test network</span>
</span></span><span class="line"><span class="cl">$ ping 192.168.2.29
</span></span><span class="line"><span class="cl"><span class="c1"># Initialize SPI Flash</span>
</span></span><span class="line"><span class="cl">$ sf probe
</span></span><span class="line"><span class="cl"><span class="c1"># Download and Update SPL binary</span>
</span></span><span class="line"><span class="cl">$ tftpboot 0xa0000000 <span class="si">${</span><span class="nv">serverip</span><span class="si">}</span>:u-boot-spl.bin.normal.out
</span></span><span class="line"><span class="cl">$ sf update 0xa0000000 0x0 <span class="nv">$filesize</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Download and Update U-Boot binary</span>
</span></span><span class="line"><span class="cl">$ tftpboot 0xa0000000 <span class="si">${</span><span class="nv">serverip</span><span class="si">}</span>:visionfive2_fw_payload.img
</span></span><span class="line"><span class="cl">$ sf update 0xa0000000 0x100000 <span class="nv">$filesize</span>
</span></span><span class="line"><span class="cl"><span class="c1"># We will not need to reset to default now!</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Save your changes</span>
</span></span><span class="line"><span class="cl">$ env save</span></span></code></pre></div></div>
<p>It will look something like this:
(I hit a key to stop autoboot)</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># open a (new console with) screen to the VisionFive 2</span>
</span></span><span class="line"><span class="cl">$ screen -L /dev/ttyUSB0 <span class="m">115200</span>
</span></span><span class="line"><span class="cl"><span class="c1"># now turn on the VisionFive 2 and you will see that if boot.</span>
</span></span><span class="line"><span class="cl">U-Boot SPL 2023.10-2023.09.22-next-5d2fae79c7d6-0ubuntu1~ppa5 <span class="o">(</span>Oct <span class="m">13</span> <span class="m">2023</span> - 13:25:02 +0000<span class="o">)</span>
</span></span><span class="line"><span class="cl">DDR version: dc2e84f0.
</span></span><span class="line"><span class="cl">Trying to boot from SPI
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">U-Boot 2023.10-2023.09.22-next-5d2fae79c7d6-0ubuntu1~ppa5 <span class="o">(</span>Oct <span class="m">13</span> <span class="m">2023</span> - 13:25:02 +0000<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">CPU:   rv64imafdc_zba_zbb
</span></span><span class="line"><span class="cl">Model: StarFive VisionFive <span class="m">2</span> v1.3B
</span></span><span class="line"><span class="cl">DRAM:  <span class="m">8</span> GiB
</span></span><span class="line"><span class="cl">Core:  <span class="m">129</span> devices, <span class="m">24</span> uclasses, devicetree: board
</span></span><span class="line"><span class="cl">MMC:   mmc@16010000: 0, mmc@16020000: <span class="m">1</span>
</span></span><span class="line"><span class="cl">Loading Environment from SPIFlash... SF: Detected gd25lq128 with page size <span class="m">256</span> Bytes, erase size <span class="m">4</span> KiB, total <span class="m">16</span> MiB
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">StarFive EEPROM format v2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">--------EEPROM INFO--------
</span></span><span class="line"><span class="cl">Vendor : StarFive Technology Co., Ltd.
</span></span><span class="line"><span class="cl">Product full SN: VF7110B1-2253-D008E000-00001648
</span></span><span class="line"><span class="cl">data version: 0x2
</span></span><span class="line"><span class="cl">PCB revision: 0xb2
</span></span><span class="line"><span class="cl">BOM revision: A
</span></span><span class="line"><span class="cl">Ethernet MAC0 address: 6c:cf:39:00:2a:e5
</span></span><span class="line"><span class="cl">Ethernet MAC1 address: 6c:cf:39:00:2a:e6
</span></span><span class="line"><span class="cl">--------EEPROM INFO--------
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">In:    serial@10000000
</span></span><span class="line"><span class="cl">Out:   serial@10000000
</span></span><span class="line"><span class="cl">Err:   serial@10000000
</span></span><span class="line"><span class="cl">Net:   eth0: ethernet@16030000, eth1: ethernet@16040000
</span></span><span class="line"><span class="cl">Working FDT <span class="nb">set</span> to ff7309d0
</span></span><span class="line"><span class="cl">Hit any key to stop autoboot:  <span class="m">0</span>
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># setenv ipaddr 192.168.2.222; setenv serverip 192.168.2.29</span>
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># ping 192.168.2.29</span>
</span></span><span class="line"><span class="cl">ethernet@16030000 Waiting <span class="k">for</span> PHY auto negotiation to complete....... <span class="k">done</span>
</span></span><span class="line"><span class="cl">Using ethernet@16030000 device
</span></span><span class="line"><span class="cl">host 192.168.2.29 is alive
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># sf probe</span>
</span></span><span class="line"><span class="cl">SF: Detected gd25lq128 with page size <span class="m">256</span> Bytes, erase size <span class="m">4</span> KiB, total <span class="m">16</span> MiB
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># tftpboot 0xa0000000 ${serverip}:u-boot-spl.bin.normal.out</span>
</span></span><span class="line"><span class="cl">Using ethernet@16030000 device
</span></span><span class="line"><span class="cl">TFTP from server 192.168.2.29<span class="p">;</span> our IP address is 192.168.2.222
</span></span><span class="line"><span class="cl">Filename <span class="s1">&#39;u-boot-spl.bin.normal.out&#39;</span>.
</span></span><span class="line"><span class="cl">Load address: 0xa0000000
</span></span><span class="line"><span class="cl">Loading: <span class="c1">###########</span>
</span></span><span class="line"><span class="cl">         1012.7 KiB/s
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">Bytes <span class="nv">transferred</span> <span class="o">=</span> <span class="m">147336</span> <span class="o">(</span>23f88 hex<span class="o">)</span>
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># sf update 0xa0000000 0x0 $filesize</span>
</span></span><span class="line"><span class="cl">device <span class="m">0</span> offset 0x0, size 0x23f88
</span></span><span class="line"><span class="cl"><span class="m">143360</span> bytes written, <span class="m">3976</span> bytes skipped in 0.840s, speed <span class="m">178970</span> B/s
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># tftpboot 0xa0000000 ${serverip}:visionfive2_fw_payload.img</span>
</span></span><span class="line"><span class="cl">Using ethernet@16030000 device
</span></span><span class="line"><span class="cl">TFTP from server 192.168.2.29<span class="p">;</span> our IP address is 192.168.2.222
</span></span><span class="line"><span class="cl">Filename <span class="s1">&#39;visionfive2_fw_payload.img&#39;</span>.
</span></span><span class="line"><span class="cl">Load address: 0xa0000000
</span></span><span class="line"><span class="cl">Loading: <span class="c1">#################################################################</span>
</span></span><span class="line"><span class="cl">         <span class="c1">#################################################################</span>
</span></span><span class="line"><span class="cl">         <span class="c1">#################################################################</span>
</span></span><span class="line"><span class="cl">         <span class="c1">###########</span>
</span></span><span class="line"><span class="cl">         <span class="m">1</span> MiB/s
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">Bytes <span class="nv">transferred</span> <span class="o">=</span> <span class="m">3013797</span> <span class="o">(</span>2dfca5 hex<span class="o">)</span>
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># sf update 0xa0000000 0x100000 $filesize</span>
</span></span><span class="line"><span class="cl">device <span class="m">0</span> offset 0x100000, size 0x2dfca5
</span></span><span class="line"><span class="cl"><span class="m">933888</span> bytes written, <span class="m">2079909</span> bytes skipped in 8.149s, speed <span class="m">378573</span> B/s
</span></span><span class="line"><span class="cl">StarFive <span class="c1"># env save</span>
</span></span><span class="line"><span class="cl">Saving Environment to SPIFlash... Erasing SPI flash...Writing to SPI flash...done
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">StarFive <span class="c1">#</span></span></span></code></pre></div></div>
<p>Done!</p>
<p>You can turn off the VisionFive 2 again</p>

<h2 class="relative group">Boot Visionfive 2 with external GPU
    <div id="boot-visionfive-2-with-external-gpu" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#boot-visionfive-2-with-external-gpu" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Put the SD-card in the Visionfive 2.</p>
<p>We will start the Visionfive 2 with the external GPU.</p>
<p>We will use the USB to TTL to see that every thing is working!</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ screen -L /dev/ttyUSB0 <span class="m">115200</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># After boot up, login with ubuntu and your password</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># First update all the packages!</span>
</span></span><span class="line"><span class="cl">ubuntu@ubuntu:~$ sudo apt update
</span></span><span class="line"><span class="cl"><span class="c1"># This takes some time</span>
</span></span><span class="line"><span class="cl">ubuntu@ubuntu:~$ sudo apt upgrade
</span></span><span class="line"><span class="cl"><span class="c1"># after install updates ignore kernel warning! Restart some services</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># install KDE and some build tools</span>
</span></span><span class="line"><span class="cl">ubuntu@ubuntu:~$ sudo apt install sddm sddm-theme-breeze kde-standard build-essential libxml2 libcurl4-gnutls-dev neofetch ubuntu-dev-tools libopenal-dev libpng-dev libjpeg-dev libfreetype6-dev libfontconfig1-dev libcurl4-gnutls-dev libsdl2-dev zlib1g-dev libbz2-dev libedit-dev python-is-python3 m4 clang sddm-theme-breeze epiphany-browser minetest
</span></span><span class="line"><span class="cl">Service restarts being deferred:                                               
</span></span><span class="line"><span class="cl"> /etc/needrestart/restart.d/dbus.service
</span></span><span class="line"><span class="cl"> systemctl restart systemd-logind.service
</span></span><span class="line"><span class="cl"> systemctl restart unattended-upgrades.service
</span></span><span class="line"><span class="cl"> systemctl restart wpa_supplicant.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">No containers need to be restarted.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">User sessions running outdated binaries:
</span></span><span class="line"><span class="cl"> ubuntu @ user manager service: systemd<span class="o">[</span>882<span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">No VM guests are running outdated hypervisor <span class="o">(</span>qemu<span class="o">)</span> binaries on this host.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ubuntu@ubuntu:~$ sudo reboot</span></span></code></pre></div></div>
<p>Now KDE will startup after booting! Have fun!</p>

<h2 class="relative group">Network
    <div id="network" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#network" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Fix network manager in KDE (so you can control network in KDE)</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nano /etc/netplan/01-network-manager-all.yaml</span></span></code></pre></div></div>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># Let NetworkManager manage all devices on this system</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">network</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">renderer</span><span class="p">:</span><span class="w"> </span><span class="l">NetworkManager</span></span></span></code></pre></div></div>
<p>Need reboot to get it working!</p>

<h2 class="relative group">Screenshot!
    <div id="screenshot" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#screenshot" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>picture or it didn&rsquo;t happen</p>
<p>ATI Radeon 5450:</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Screenshot with ATI Radeon 5450"
    width="1920"
    height="1080"
    src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/cover_hu_c7a37d3a0cbee676.png"
    srcset="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/cover_hu_c7a37d3a0cbee676.png 800w, /posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/cover_hu_afb0d04ffdac6508.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/cover.png"></figure>
<p>ATI Radeon R9 290:</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Screenshot with ATI Radeon R9 290"
    width="1920"
    height="1080"
    src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/Screenshot_2023_11_20_ATI_Radeon_R9_290_hu_ef727894730ef2d8.png"
    srcset="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/Screenshot_2023_11_20_ATI_Radeon_R9_290_hu_ef727894730ef2d8.png 800w, /posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/Screenshot_2023_11_20_ATI_Radeon_R9_290_hu_3ea9b1355c3f23a6.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/starfive-visionfive-2/2023-11-20-ubuntuatiradeonr9_290_2023_11_20/Screenshot_2023_11_20_ATI_Radeon_R9_290.png"></figure>

          
          
          
        </div>
        
        

        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_posts/starfive-visionfive-2/2023-11-20-UbuntuATIRadeonR9_290_2023_11_20/index.md"
          data-oid-likes="likes_posts/starfive-visionfive-2/2023-11-20-UbuntuATIRadeonR9_290_2023_11_20/index.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
      <div class="flex justify-between pt-3">
        <span class="flex flex-col">
          
            <a
              class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/posts/xiaomi-poco-f1/2023-10-31-k3s-on-arm-postmarketos/">
              <span class="leading-6">
                <span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Xiaomi POCO F1 - K3S Cluster on postmarketos
              </span>
            </a>
            
              <span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2023-10-31T00:00:00&#43;00:00">31 October 2023</time>
              </span>
            
          
        </span>
        <span class="flex flex-col items-end">
          
            <a
              class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/posts/starfive-visionfive-2/2024-09-02-opensuseatiradeonr9_290_mainline/">
              <span class="leading-6">
                StarFive VisionFive 2 - 6.11-rc6 with external GPU&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
              </span>
            </a>
            
              <span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2024-09-02T00:00:00&#43;00:00">2 September 2024</time>
              </span>
            
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
      
      
        
          
          
      
      
      
      <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400 ">
        <ul class="flex list-none flex-col sm:flex-row">
          
            <li class=" flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0 ">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center"
                href="/tags/"
                title="Tags">
                
                Tags
              </a>
            </li>
          
        </ul>
      </nav>
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2026
          Bas Magré
      </p>
    

    
    
      <p class="text-xs text-neutral-500 dark:text-neutral-400">
        
        
        Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
      </p>
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="https://demo.k8s.babelvis.io/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
